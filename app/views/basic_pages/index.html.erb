<% content_for :title, "Bake is Yum - Dessert Recipes from Elina Charalampous" %>
<!-- Carousel starts here -->
<div class="container-fluid" id="carousel-index">
  <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
    <!-- Indicators -->
    <ol class="carousel-indicators">
      <% @recipes.reverse.each do |recipe| %>
        <li data-target="#carousel-example-generic" data-slide-to="<%= @recipes.index(recipe) %>" <%= 'class = active' if recipe == @recipes.last %>></li>
      <% end %>
    </ol>

    <!-- Wrapper for slides -->
    <div class="carousel-inner" role="listbox">
      <% @recipes.reverse.each do |recipe| %>
        <div class="item <%="active" if recipe == @recipes.last %>">
          <%= image_tag(recipe.image_url_url.to_s, class: "img-responsive", alt: recipe.name, lazy: false) %>
          <div class="carousel-caption">
            <p><%= recipe.name %></p>
            <%=link_to "Read more", recipe, class: 'btn-read-more'%>
          </div>

        </div> <!-- end item -->
      <% end %>
    </div> <!-- end carousel-inner -->

    <!-- Controls -->
   <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
     <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
     <span class="sr-only">Previous</span>
   </a>
   <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
     <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
     <span class="sr-only">Next</span>
   </a>
  </div> <!-- end carousel-slide -->
</div> <!-- /container-fluid -->
<!-- Carousel ends here -->

<!-- Recipes list starts here -->
<div class="container">
  <div class="row">
    <div class="col-xs-10 col-xs-offset-1 col-sm-3 col-sm-push-9 col-sm-offset-0 subscribe-box text-center">
      <p> Subscribe to receive e-mails with the new recipes!</p>
      <%= form_with(model: @subscription) do |form| %>
        <div class="form-group">
          <%= form.label :email, "Email address*" %>
          <%= form.text_field :email, class: 'form-control' %>
          <p class="email-error"></p>
        </div>

        <div class="privacy_policy">
          <%= form.label :privacy_policy do %>
            <%= form.check_box :privacy_policy %>
            I agree to sign up to receive email updates. We take your privacy seriously. See our <%= link_to 'Privacy Policy', privacy_policy_path %>.
          <% end %>
        </div>

        <div class="actions">
          <%= form.submit 'Subscribe', class: "btn btn-default" %>
        </div>
      <% end %>
    </div>

    <div class="col-sm-9 col-sm-pull-3">
      <% @recipes.reverse.each do |recipe| %>
        <% if recipe.name and recipe.image_url_url.to_s %>
          <div class="col-xs-12 recipe-lading-card">
            <h2><%= recipe.name %></h2>
            <% t = recipe.created_at %>
            <h6>Posted on <%= t.strftime("%B") + " " + t.strftime("%d") + ", " + t.strftime("%Y")%></h6>
            <%= link_to recipe, :action => 'go' do %>
              <div class="recipe-landing-img">
                <%= image_tag( recipe.image_url_url.to_s , class: "img-responsive", alt: recipe.name) %>
              </div>
            <% end %>
            <p class="recipe-landing-description"><%= recipe.short_description.html_safe %></p>

          </div>
        <% end %>
      <% end %>
      <%=link_to "Check out all the recipes", recipes_path, :class => 'col-xs-10 col-xs-offset-1 btn btn-get-more-recipes'%>
    </div>

  </div> <!-- end row -->
</div><!-- end container -->
<!-- Recipes list ends here -->
