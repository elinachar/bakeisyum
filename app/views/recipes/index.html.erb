<% content_for :title, "Recipes - Bake is Yum" %>
<%= content_for :structured_data do %>
  <script type='application/ld+json'>
    {
    "@context":"https://schema.org",
    "@graph":[
      {"@type":"WebSite",
      "@id":"https://bakeisyum.com/#website",
      "url":"https://bakeisyum.com/",
      "name":"Bake is Yum",
      "description":"Baking Blog and dessert recipes to follow, share and enjoy.",
      "publisher":{
        "@id":"https://bakeisyum.com/#organization"},
        "potentialAction":[{
          "@type":"SearchAction",
          "target":"https://bakeisyum.com/recipes?utf8=%E2%9C%93&q={search_term_string}=&button=",
          "query-input":"required name=search_term_string"}],
        "inLanguage":"en-US"},
      {
      "@type":"CollectionPage",
      "@id":"https://bakeisyum.com/recipes/#webpage",
      "url":"https://bakeisyum.com/recipes/",
      "name":"Recipes - Bake is Yum",
      "isPartOf":{"@id":"https://bakeisyum.com/#website"},
      "description":"Browse of delicious baking recipes! Enjoy, comment, rate and share!",
      "breadcrumb":{"@id":"https://bakeisyum.com/recipes/#breadcrumb"},
      "inLanguage":"en-US",
      "potentialAction":[{
        "@type":"ReadAction",
        "target":["https://bakeisyum.com/recipes/"]}]}
    ]}
  </script>
<% end %>
<h1>Recipes</h1>

<% if signed_in? && (current_user.admin? || current_user.author?) %>
  <div class="row btn-new-recipe">
    <%= link_to '<span class="glyphicon glyphicon-plus-sign"></span> Add New Recipe'.html_safe, new_recipe_path, class: 'btn btn-default col-xs-12 col-md-3 col-md-offset-9' %>
  </div><!-- end row -->
<% end %>

<div class="container recipes-index">
  <div class="row">
    <% if @search_term && !@search_term.empty? %>
      <div class="col-xs-12 search-results">
        <h4 class="text-center">Search results for:</h4>
        <p class="text-center"><%= @search_term %></p>
      </div>
      <% if @recipes.empty? %>
        <p class="text-center empty-result">There are no recipes found for <%= @search_term %> ...</p>
      <% end %>
    <% end %>
    <%= render @recipes %>
    <div class="col-xs-12 text-center show-more-recipes">
      <%#= link_to 'Show more recipes', recipes_path(recipes_id: @recipes.pluck(:id)), local: true, class: "btn" %>
      <%= will_paginate @recipes %>
    </div>
  </div> <!-- end row -->
</div> <!-- end container -->

<br>
